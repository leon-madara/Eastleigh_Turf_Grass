const k="modulepreload",$=function(s){return"/Eastleigh_Turf_Grass/"+s},S={},y=function(e,a,d){if(!a||a.length===0)return e();const u=document.getElementsByTagName("link");return Promise.all(a.map(c=>{if(c=$(c),c in S)return;S[c]=!0;const r=c.endsWith(".css"),C=r?'[rel="stylesheet"]':"";if(!!d)for(let m=u.length-1;m>=0;m--){const p=u[m];if(p.href===c&&(!r||p.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(c,'"]').concat(C)))return;const f=document.createElement("link");if(f.rel=r?"stylesheet":k,r||(f.as="script",f.crossOrigin=""),f.href=c,document.head.appendChild(f),r)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(c))))})})).then(()=>e()).catch(c=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=c,window.dispatchEvent(r),!r.defaultPrevented)throw c})};(()=>{let s=[],e=0;function a(){try{d(),m(),L(),I(),window.CartState&&window.CartState.subscribe(t=>{f()})}catch(t){console.warn("Cart initialization failed:",t)}}function d(){const t=localStorage.getItem("eastleighCart");if(t)try{s=JSON.parse(t),g()}catch(o){console.error("Error loading cart from storage:",o),s=[]}}function u(){localStorage.setItem("eastleighCart",JSON.stringify(s))}function c(t){const o=s.findIndex(i=>i.id===t.id&&i.length===t.length&&i.width===t.width);o!==-1?s[o].quantity+=t.quantity:s.push(t),g(),u(),m(),window.CartState&&window.CartState.add(t),v("Item Added","".concat(t.name," has been added to your cart"),"success")}function r(t){const o=s[t];s.splice(t,1),g(),u(),m(),window.CartState&&window.CartState.remove(o.id),v("Item Removed","".concat(o.name," has been removed from your cart"),"error")}function C(t,o){if(o<=0){r(t);return}s[t].quantity=o,s[t].total=s[t].area*s[t].price*o,g(),u(),m()}function g(){e=s.reduce((t,o)=>t+o.total,0)}function f(){try{const t=document.getElementById("cartTotal"),o=document.getElementById("applyDiscountBtn"),i=document.getElementById("enterCouponBtn");if(!t)return;const n=s.reduce((h,b)=>h+b.total,0),l=window.CartState?window.CartState.getDiscountAmount():0,w=n-l;if(l>0?t.innerHTML='\n                    <div class="cart-total-breakdown">\n                        <div class="subtotal">Subtotal: KES '.concat(n.toLocaleString(),'</div>\n                        <div class="discount">Discount: -KES ').concat(l.toLocaleString(),'</div>\n                        <div class="final-total">Total: KES ').concat(w.toLocaleString(),"</div>\n                    </div>\n                "):t.textContent="KES ".concat(n.toLocaleString()),o){const h=window.CartState&&window.CartState.getDiscountAmount()>0;o.innerHTML=h?'<i class="fas fa-check"></i> Discount Applied':'<i class="fas fa-tag"></i> Apply Discount',o.classList.toggle("applied",h)}if(i){const h=window.CartState&&window.CartState.appliedCoupon;i.innerHTML=h?'<i class="fas fa-check"></i> Coupon Applied':'<i class="fas fa-ticket-alt"></i> Enter Coupon',i.classList.toggle("applied",h)}}catch(t){console.warn("Cart summary update failed:",t)}}function m(){try{p(),B()}catch(t){console.warn("Cart display update failed:",t)}}function p(){try{const t=document.getElementById("cartCount"),o=document.getElementById("cartCountBadge"),i=s.reduce((n,l)=>n+l.quantity,0);t&&(t.textContent=i),o&&(o.textContent=i)}catch(t){console.warn("Cart count update failed:",t)}}function B(){try{const t=document.getElementById("cartItems"),o=document.getElementById("cartSummary"),i=document.getElementById("cartTotal");if(!t)return;s.length===0?(t.innerHTML='\n                    <div class="empty-cart">\n                        <i class="fas fa-shopping-basket"></i>\n                        <p>Your cart is empty</p>\n                        <span>Add some products to get started</span>\n                    </div>\n                ',o&&(o.style.display="none")):(t.innerHTML=s.map((n,l)=>'\n                    <div class="cart-item">\n                        <div class="cart-item-image">\n                            <img src="'.concat(n.image,'" alt="').concat(n.name,'" />\n                        </div>\n                        <div class="cart-item-details">\n                            <div class="cart-item-name">').concat(n.name,'</div>\n                            <div class="cart-item-dimensions">').concat(n.length,"m Ã— ").concat(n.width,'m</div>\n                            <div class="cart-item-price">KES ').concat(n.total.toLocaleString(),'</div>\n                        </div>\n                        <div class="cart-item-actions">\n                            <div class="quantity-controls">\n                                <button class="quantity-btn" onclick="window.CartComponent.updateQuantity(').concat(l,", ").concat(n.quantity-1,')">-</button>\n                                <span class="quantity-display">').concat(n.quantity,'</span>\n                                <button class="quantity-btn" onclick="window.CartComponent.updateQuantity(').concat(l,", ").concat(n.quantity+1,')">+</button>\n                            </div>\n                            <button class="remove-item-btn" onclick="window.CartComponent.remove(').concat(l,')">\n                                <i class="fas fa-trash"></i>\n                            </button>\n                        </div>\n                    </div>\n                ')).join(""),o&&(o.style.display="block",f()))}catch(t){console.warn("Cart panel update failed:",t)}}function E(){s=[],e=0,u(),m(),window.CartState&&window.CartState.clear(),v("Cart Cleared","All items have been removed from your cart","error")}function v(t,o,i="success"){if(window.ToastService)window.ToastService.show(o||t,i);else{const n=document.getElementById("toast");if(!n)return;const l=n.querySelector(".toast-message"),w=n.querySelector(".toast-icon i");if(l&&(l.textContent=o||t),w)switch(i){case"success":w.className="fas fa-check-circle";break;case"error":w.className="fas fa-exclamation-circle";break;case"warning":w.className="fas fa-exclamation-triangle";break;case"info":w.className="fas fa-info-circle";break;default:w.className="fas fa-check-circle"}n.className="toast ".concat(i),n.classList.remove("hidden"),n.classList.add("show"),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>{n.classList.add("hidden")},300)},3e3);const h=n.querySelector(".toast-close");h&&h.addEventListener("click",()=>{n.classList.remove("show"),setTimeout(()=>{n.classList.add("hidden")},300)})}}function I(){(window.location.pathname.includes("products.html")||window.location.pathname==="/"&&window.location.hash==="#cart")&&(y(()=>import("./discountModal.b229b9bd.js"),[]).then(t=>{window.discountModal=t.discountModal}),y(()=>import("./couponModal.60047bdc.js"),[]).then(t=>{window.couponModal=t.couponModal}),y(()=>import("./checkoutModal.0d0983e5.js"),[]).then(t=>{window.checkoutModal=t.checkoutModal,window.checkoutModal.init()}))}function L(){try{const t=document.getElementById("clearCartBtn");t&&t.addEventListener("click",E);const o=document.getElementById("submitOrderBtn");o&&o.addEventListener("click",()=>{window.checkoutModal?window.checkoutModal.open():window.location.href="/products.html#cart"});const i=document.getElementById("applyDiscountBtn"),n=document.getElementById("enterCouponBtn");i&&i.addEventListener("click",()=>{window.discountModal?window.discountModal.open():window.location.href="/products.html#cart"}),n&&n.addEventListener("click",()=>{window.couponModal?window.couponModal.open():window.location.href="/products.html#cart"})}catch(t){console.warn("Cart events binding failed:",t)}}window.CartComponent={init:a,add:c,remove:r,updateQuantity:C,clear:E,getItems:()=>s,getTotal:()=>e,getCount:()=>s.reduce((t,o)=>t+o.quantity,0)},document.readyState==="loading"?document.addEventListener("DOMContentLoaded",a):a()})();class M{constructor(){this.toastContainer=null,this.toastQueue=[],this.isProcessing=!1,this.defaultDuration=3e3,this.init()}init(){document.getElementById("toast-container")||this.createToastContainer(),this.toastContainer=document.getElementById("toast-container")}createToastContainer(){const e=document.createElement("div");e.id="toast-container",e.className="toast-container",document.body.appendChild(e)}show(e,a="info",d=this.defaultDuration){const u=this.createToast(e,a);this.toastQueue.push({toast:u,duration:d}),this.isProcessing||this.processQueue()}createToast(e,a){const d=document.createElement("div");d.className="toast-notification ".concat(a);const u=this.getIconForType(a);return d.innerHTML='\n            <div class="toast-header">\n                <i class="'.concat(u,'"></i>\n                <span class="toast-title">').concat(this.getTitleForType(a),'</span>\n                <button class="toast-close" aria-label="Close notification">\n                    <i class="fas fa-times"></i>\n                </button>\n            </div>\n            <div class="toast-message">').concat(e,"</div>\n        "),d.querySelector(".toast-close").addEventListener("click",()=>{this.hideToast(d)}),d}getIconForType(e){const a={success:"fas fa-check-circle",error:"fas fa-exclamation-circle",warning:"fas fa-exclamation-triangle",info:"fas fa-info-circle"};return a[e]||a.info}getTitleForType(e){const a={success:"Success",error:"Error",warning:"Warning",info:"Information"};return a[e]||a.info}processQueue(){if(this.toastQueue.length===0){this.isProcessing=!1;return}this.isProcessing=!0;const{toast:e,duration:a}=this.toastQueue.shift();this.toastContainer.appendChild(e),requestAnimationFrame(()=>{e.classList.add("show")}),setTimeout(()=>{this.hideToast(e)},a)}hideToast(e){e.classList.add("hiding"),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),this.processQueue()},300)}success(e,a){this.show(e,"success",a)}error(e,a){this.show(e,"error",a)}warning(e,a){this.show(e,"warning",a)}info(e,a){this.show(e,"info",a)}clear(){this.toastContainer&&(this.toastContainer.innerHTML=""),this.toastQueue=[],this.isProcessing=!1}}const T=new M;window.ToastService=T;window.showToast=(s,e,a="info")=>{T.show(e||s,a)};export{y as _};
