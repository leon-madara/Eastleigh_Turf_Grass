(()=>{if(window.brokerModalInitialized)return;window.brokerModalInitialized=!0;let e=null,n=null,o=null,l=null,t=null;const r="BROKER",i=function(){if(window.location.pathname.includes("/Eastleigh_Turf_Grass/"))return"/Eastleigh_Turf_Grass";return""}()+"/broker.html";function s(){e?(e.removeAttribute("hidden"),document.body.style.overflow="hidden",setTimeout(()=>{o&&o.focus()},40)):console.warn("Modal not initialized")}function d(){e?(e.setAttribute("hidden",""),n&&n.reset(),a(),u(!1),document.body.style.overflow=""):console.warn("Modal not initialized")}function a(){if(!n)return;n.querySelectorAll(".bl-error").forEach(e=>{e.classList.remove("bl-error")});n.querySelectorAll(".bl-errtext").forEach(e=>{e.remove()})}function c(e,n){e.classList.add("bl-error");const o=document.createElement("div");o.className="bl-errtext",o.innerHTML='<i class="fa-solid fa-circle-exclamation"></i> '.concat(n),e.parentNode.insertBefore(o,e.nextSibling)}function u(e){if(!t)return;const n=t.querySelector(".btn-text"),o=t.querySelector(".btn-loading");e?(t.classList.add("loading"),t.disabled=!0,n&&(n.style.display="none"),o&&(o.hidden=!1)):(t.classList.remove("loading"),t.disabled=!1,n&&(n.style.display="inline"),o&&(o.hidden=!0))}function b(e){if(e.preventDefault(),!n||!o||!l)return void console.error("Form elements not found");a();const t=o.value.trim(),s=l.value.trim();return t?s?(u(!0),void setTimeout(()=>{t===r&&"123"===s?function(){console.log("Redirecting to broker dashboard...");const e={loggedIn:!0,user:{username:r,email:"broker@eastleighturf.com",phone:"+254700000000",role:"broker"},loginTime:(new Date).toISOString()};localStorage.setItem("authState",JSON.stringify(e)),window.location.href=i}():(u(!1),o&&c(o,"Invalid credentials. Use demo username: BROKER"),l&&c(l,"Invalid credentials. Use demo password: 123"),o&&o.focus())},700)):(c(l,"Password is required"),void l.focus()):(c(o,"Username is required"),void o.focus())}function m(n){"Escape"===n.key&&e&&!e.hidden&&d()}function f(){try{document.body.insertAdjacentHTML("beforeend",'\n            <div id="brokerLogin" class="bl-modal" hidden>\n                <div class="bl-overlay"></div>\n                <div class="bl-dialog">\n                    <button class="bl-close" aria-label="Close modal">\n                        <i class="fas fa-times"></i>\n                    </button>\n                    \n                    <div class="bl-head">\n                        <div class="bl-mark">\n                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />\n                                <polyline points="10,17 15,12 10,7" />\n                                <line x1="15" y1="12" x2="3" y2="12" />\n                            </svg>\n                        </div>\n                        <h2 class="bl-title">Broker Login</h2>\n                        <p class="bl-sub">Enter your credentials to access the broker dashboard</p>\n                    </div>\n                    \n                    <form id="bl-form" class="bl-form">\n                        <div class="bl-row">\n                            <label for="bl-user">Username</label>\n                            <input type="text" id="bl-user" name="username" placeholder="Enter your username" required>\n                        </div>\n                        \n                        <div class="bl-row">\n                            <label for="bl-pass">Password</label>\n                            <input type="password" id="bl-pass" name="password" placeholder="Enter your password" required>\n                        </div>\n                        \n                        <button type="submit" class="bl-btn bl-btn-primary bl-btn-block">\n                            <span class="btn-text">Login</span>\n                            <span class="btn-loading" hidden>\n                                <i class="fas fa-spinner fa-spin"></i>\n                                Logging in...\n                            </span>\n                        </button>\n                        \n                        <p class="bl-note">Demo Credentials</p>\n                        <p class="bl-help">Username: <code>BROKER</code> | Password: <code>123</code></p>\n                    </form>\n                </div>\n            </div>\n        '),e=document.getElementById("brokerLogin"),n=document.getElementById("bl-form"),o=document.getElementById("bl-user"),l=document.getElementById("bl-pass"),t=document.querySelector(".bl-btn"),function(){if(!(e&&n&&o&&l&&t))return void console.error("Required modal elements not found");const r=document.getElementById("dealerLoginBtn");r&&r.addEventListener("click",e=>{e.preventDefault(),s()}),e.querySelectorAll(".bl-close, .bl-overlay").forEach(e=>{e.addEventListener("click",d)}),n.addEventListener("submit",b),document.addEventListener("keydown",m)}(),console.log("Broker login modal initialized successfully")}catch(r){console.error("Failed to initialize broker login modal:",r)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f):f(),window.BrokerLogin={open:s,close:d}})();
//# sourceMappingURL=BrokerLoginModal.8b54d6fd.js.map
