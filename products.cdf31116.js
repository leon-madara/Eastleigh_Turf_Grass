var t=Object.defineProperty,e=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,n,a)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a;import"./toast.f81f0a6b.js";import{_ as l}from"./cart.5ce05c2a.js";import{c as i,d as c}from"./discountService.94c97e12.js";import"./products.4ed993c7.js";import"./toastService.54c35f7e.js";var r,d,u=(r={"products.cdf31116.js"(t){const e=(()=>{let t=[],e=null,l=null,r=[];function d(){return[...t]}function u(){return t.reduce((t,e)=>t+e.total,0)}function p(){const t=u();let n=0;return e?n=i.calculateCouponDiscount(e,t):l&&(n=c.calculatePromotionDiscount(l,t)),n}function v(){return u()-p()}function m(){const t=u(),n=p(),a=v();r.forEach(o=>{try{o({items:d(),subtotal:t,discountAmount:n,total:a,appliedCoupon:e,appliedPromotion:l})}catch(s){console.error("Cart subscriber error:",s)}}),window.renderCartUI&&window.renderCartUI(d(),a,n)}return{getItems:d,add:function(e){const l=Date.now();t.push(((t,e)=>{for(var l in e||(e={}))a.call(e,l)&&s(t,l,e[l]);if(n)for(var l of n(e))o.call(e,l)&&s(t,l,e[l]);return t})({id:l},e)),m()},remove:function(e){t=t.filter(t=>t.id!==e),m()},clear:function(){t=[],e=null,l=null,m()},getSubtotal:u,applyCoupon:function(t){const n=u(),a=i.applyCoupon(t,n);return a.valid&&(e=a.coupon,l=null,i.incrementCouponUsage(t)),m(),a},applyPromotion:function(t){const n=u(),a=c.applyPromotion(t,n);return a.valid&&(l=a.promotion,e=null),m(),a},removeDiscount:function(){e=null,l=null,m()},getDiscountAmount:p,getTotal:v,getAvailablePromotions:function(){const t=u();return c.getAvailablePromotions(t)},getBestPromotion:function(){const t=u();return c.getBestPromotion(t)},subscribe:function(t){return r.push(t),()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)}}}})();window.CartState=e,Promise.allSettled([l(()=>import("./checkoutModal.d580fe26.js"),[]).then(t=>{window.checkoutModal=t.checkoutModal,console.log("Checkout modal loaded")}).catch(t=>console.warn("Checkout modal not available:",t)),l(()=>import("./discountModal.914921b8.js"),[]).then(t=>{window.discountModal=t.discountModal,console.log("Discount modal loaded")}).catch(t=>console.warn("Discount modal not available:",t)),l(()=>import("./couponModal.31dbf64e.js"),[]).then(t=>{window.couponModal=t.couponModal,console.log("Coupon modal loaded")}).catch(t=>console.warn("Coupon modal not available:",t)),l(()=>import("./BrokerLoginModal.8b54d6fd.js"),[]).then(()=>{console.log("Broker login modal loaded")}).catch(t=>console.warn("Broker login modal not available:",t))]),document.addEventListener("DOMContentLoaded",()=>{return e=t,n=null,a=function*(){console.log("Products page loaded");const t=document.getElementById("productsGrid");if(t){console.log("Products grid found, loading products...");try{const e=yield fetch("/src/data/products.json",{cache:"no-cache"});if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));const n=yield e.json();console.log("Products loaded:",n.length,"products"),n.forEach(e=>{const n=function(t,e){const n=t=>Number.isFinite(t)?t.toLocaleString():"0",a=document.createElement("div");a.className="product-card",a.setAttribute("data-product-id",t.id),a.innerHTML='\n    <div class="product-image">\n      <img src="'.concat(t.image,'" alt="').concat(t.name,'" />\n      <div class="product-badges">\n        <div class="product-badge">').concat(t.thickness,'</div>\n        <div class="product-badge price">\n          KES <span class="price-amount">').concat(n(t.price),'</span>/m²\n        </div>\n      </div>\n    </div>\n\n    <div class="product-content">\n      <h3 class="product-title">').concat(t.name,'</h3>\n\n      <div class="product-section">\n        <h4>Best for</h4>\n        <div class="use-cases">\n          ').concat(t.useCases.map(t=>'<span class="use-case">'.concat(t,"</span>")).join(""),'\n        </div>\n      </div>\n\n      <div class="product-section">\n        <h4>Key Features:</h4>\n        <ul class="features-list">\n          ').concat(t.features.map(t=>"<li>".concat(t,"</li>")).join(""),'\n        </ul>\n      </div>\n\n      <div class="calculator-section">\n        <div class="dimension-inputs">\n          <div class="input-group">\n            <label>Width (m)</label>\n            <input type="number" class="width-input" placeholder="0" min="0" step="0.1" inputmode="decimal" pattern="[0-9]*[.]?[0-9]+" />\n          </div>\n          <div class="input-group">\n            <label>Height (m)</label>\n            <input type="number" class="height-input" placeholder="0" min="0" step="0.1" inputmode="decimal" pattern="[0-9]*[.]?[0-9]+" />\n          </div>\n        </div>\n\n        <button class="calculate-btn">\n          <i class="fas fa-calculator"></i>\n          Calculate\n        </button>\n\n        <div class="calculation-result" style="display:none;">\n          <div class="result-row">\n            <span class="area-label">Area:</span><span class="area-value">0 m²</span>\n          </div>\n          <div class="result-row">\n            <span class="unit-price-label">Unit Price:</span><span class="unit-price">KES 0/m²</span>\n          </div>\n          <div class="result-row">\n            <span class="total-label">Total:</span><span class="total-price">KES 0</span>\n          </div>\n        </div>\n\n        <button class="add-to-cart-btn" disabled>\n          <i class="fas fa-shopping-cart"></i>\n          Add to Cart\n        </button>\n      </div>\n    </div>\n  ');const o=a.querySelector(".width-input"),s=a.querySelector(".height-input"),l=a.querySelector(".calculate-btn"),i=a.querySelector(".calculation-result"),c=a.querySelector(".add-to-cart-btn");let r=null;const d=()=>{const t=parseFloat(o.value)||0,e=parseFloat(s.value)||0;return o.classList.remove("input-valid","input-invalid"),s.classList.remove("input-valid","input-invalid"),t>0&&e>0?(o.classList.add("input-valid"),s.classList.add("input-valid"),{width:t,height:e,isValid:!0}):(t<=0&&""!==o.value&&o.classList.add("input-invalid"),e<=0&&""!==s.value&&s.classList.add("input-invalid"),{width:t,height:e,isValid:!1})},u=()=>{const{width:e,height:o,isValid:s}=d();if(s){const s=e*o,l=s*t.price;a.querySelector(".area-value").textContent="".concat(s.toFixed(2)," m²"),a.querySelector(".unit-price").textContent="KES ".concat(n(t.price),"/m²"),a.querySelector(".total-price").textContent="KES ".concat(n(l)),i.style.display="block",c.disabled=!1,c.dataset.width=String(e),c.dataset.height=String(o),c.dataset.area=String(s),c.dataset.total=String(l)}else i.style.display="none",c.disabled=!0},p=()=>{r&&clearTimeout(r),r=setTimeout(u,300)},v=()=>{o.value="",s.value="",o.classList.remove("input-valid","input-invalid"),s.classList.remove("input-valid","input-invalid"),i.style.display="none",c.disabled=!0,delete c.dataset.width,delete c.dataset.height,delete c.dataset.area,delete c.dataset.total,setTimeout(()=>{o.focus()},100)};return o.addEventListener("blur",p),s.addEventListener("blur",p),o.addEventListener("input",t=>{const e=t.target.value;e&&!/^\d*\.?\d*$/.test(e)&&(t.target.value=e.replace(/[^\d.]/g,"")),d()}),s.addEventListener("input",t=>{const e=t.target.value;e&&!/^\d*\.?\d*$/.test(e)&&(t.target.value=e.replace(/[^\d.]/g,"")),d()}),l.addEventListener("click",u),a.addEventListener("keydown",t=>{"Enter"!==t.key||t.target!==o&&t.target!==s?"Escape"===t.key&&(t.preventDefault(),v()):(t.preventDefault(),u())}),c.addEventListener("click",()=>{const n=parseFloat(c.dataset.width||"0"),a=parseFloat(c.dataset.height||"0"),o=parseFloat(c.dataset.area||"0"),s=parseFloat(c.dataset.total||"0"),l={id:t.id,name:t.name,image:t.image,price:t.price,length:a,width:n,area:o,total:s,quantity:1};window.CartComponent&&window.CartComponent.add(l),"function"==typeof e&&e(l),setTimeout(()=>{v()},200)}),a}(e);t.appendChild(n)}),console.log("Product cards added to grid"),"#cart"===window.location.hash&&setTimeout(()=>{const t=document.getElementById("cart");t&&t.scrollIntoView({behavior:"smooth",block:"start"})},500)}catch(e){console.error("Error loading products:",e)}}else console.error("Products grid not found!")},new Promise((t,o)=>{var s=t=>{try{i(a.next(t))}catch(e){o(e)}},l=t=>{try{i(a.throw(t))}catch(e){o(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,l);i((a=a.apply(e,n)).next())});var e,n,a})}},function(){return d||(0,r[e(r)[0]])((d={exports:{}}).exports,d),d.exports});export default u();
//# sourceMappingURL=products.cdf31116.js.map
