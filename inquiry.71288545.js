(()=>{let e=[],n=[],t=1;function i(){!function(){return n=this,t=null,i=function*(){try{const n=yield fetch("/src/data/products.json");e=yield n.json()}catch(n){console.error("Failed to load products:",n),showToast("Failed to load products","error")}},new Promise((e,r)=>{var a=e=>{try{c(i.next(e))}catch(n){r(n)}},o=e=>{try{c(i.throw(e))}catch(n){r(n)}},c=n=>n.done?e(n.value):Promise.resolve(n.value).then(a,o);c((i=i.apply(n,t)).next())});var n,t,i}(),o()}function r(e){n=n.filter(n=>n.id!==e),o(),showToast("Inquiry removed","success"),window.BrokerDashboard&&window.BrokerDashboard.updateCartCount&&window.BrokerDashboard.updateCartCount()}function a(t,i,r){const a=n.find(e=>e.id===t);if(a){if("productId"===i){const n=e.find(e=>e.id===r);a.productId=r,a.product=n,a.originalPrice=n?n.price:0,a.difference=a.bargainPrice-a.originalPrice}else"bargainPrice"===i&&(a.bargainPrice=window.numberFormatter?window.numberFormatter.parseFormattedNumber(r):parseFloat(r)||0,a.difference=a.bargainPrice-a.originalPrice);o()}}function o(){const t=document.getElementById("inquiryTableBody"),i=document.getElementById("emptyInquiryState"),o=document.getElementById("submitInquiriesBtn");t&&i&&o&&(0===n.length?(t.innerHTML="",i.style.display="block",o.disabled=!0):(i.style.display="none",o.disabled=!1,t.innerHTML=n.map(n=>function(n){const t=e.map(e=>'<option value="'.concat(e.id,'" ').concat(n.productId===e.id?"selected":"",">\n                ").concat(e.name," (").concat(e.thickness,")\n            </option>")).join(""),i=(a=n.difference,a<0?"negative":a>0?"positive":"neutral"),r=function(e){const n=Math.abs(e);return"".concat(e<0?"-":e>0?"+":"","KES ").concat(n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}(n.difference);var a;return'\n            <tr>\n                <td>\n                  <div class="order-field">\n                    <label for="inquiry-product-'.concat(n.id,'">Product Name</label>\n                    <select class="table-select" id="inquiry-product-').concat(n.id,'">\n                        <option value="">Select a product</option>\n                        ').concat(t,'\n                    </select>\n                  </div>\n                </td>\n                <td>\n                  <div class="order-field">\n                    <label>Original Price (KES)</label>\n                    <input type="text" class="table-input" readonly \n                           value="').concat(n.originalPrice.toLocaleString("en-US"),'">\n                  </div>\n                </td>\n                <td>\n                  <div class="order-field">\n                    <label for="bargain-').concat(n.id,'">Your Bargain Price (KES)</label>\n                    <input type="number" inputmode="decimal" class="table-input" id="bargain-').concat(n.id,'" \n                           value="').concat(n.bargainPrice,'" min="0" step="0.01" placeholder="0">\n                  </div>\n                </td>\n                <td>\n                  <div class="order-field">\n                    <label>Price Difference</label>\n                    <span class="price-difference ').concat(i,'">').concat(r,'</span>\n                  </div>\n                </td>\n                <td>\n                  <div class="order-field">\n                    <label>Action</label>\n                    <button class="delete-btn" id="delete-inquiry-').concat(n.id,'">\n                        <i class="fas fa-trash"></i> Delete\n                    </button>\n                  </div>\n                </td>\n            </tr>\n        ')}(n)).join(""),n.forEach(e=>{const n=document.getElementById("inquiry-product-".concat(e.id)),t=document.getElementById("bargain-".concat(e.id)),i=document.getElementById("delete-inquiry-".concat(e.id));if(n&&n.addEventListener("change",n=>{a(e.id,"productId",n.target.value)}),t)if(t.addEventListener("input",n=>{a(e.id,"bargainPrice",n.target.value)}),window.numberFormatter)window.numberFormatter.initInputFormatting(t,{allowDecimals:!0,decimalPlaces:2,currency:"KES"});else{const e=setInterval(()=>{window.numberFormatter&&(window.numberFormatter.initInputFormatting(t,{allowDecimals:!0,decimalPlaces:2,currency:"KES"}),clearInterval(e))},100)}i&&i.addEventListener("click",()=>{r(e.id)})})))}window.InquiryModule={init:i,addInquiry:function(){const e={id:t++,productId:"",product:null,originalPrice:0,bargainPrice:0,difference:0};n.push(e),o(),showToast("Inquiry added","success"),window.BrokerDashboard&&window.BrokerDashboard.updateCartCount&&window.BrokerDashboard.updateCartCount()},removeInquiry:r,updateInquiry:a,submitInquiries:function(){if(0===n.length)return void showToast("No inquiries to submit","error");if(n.filter(e=>!e.productId||e.bargainPrice<=0).length>0)showToast("Please complete all inquiries before submitting","error");else try{const e={brokerName:"Broker User",brokerEmail:"broker@eastleighturf.com",items:n.map(e=>({product:e.product,originalPrice:e.originalPrice,bargainPrice:e.bargainPrice})),totalOriginal:n.reduce((e,n)=>e+n.originalPrice,0),totalBargain:n.reduce((e,n)=>e+n.bargainPrice,0)};let i=!1;if(window.WhatsAppService&&window.WhatsAppService.sendInquiryForm)i=window.WhatsAppService.sendInquiryForm(e);else{const n=function(e){const{brokerName:n,brokerEmail:t,items:i,totalOriginal:r,totalBargain:a}=e,o=i.map(e=>{const n=e.bargainPrice-e.originalPrice,t=n>0?"+KES ".concat(n.toLocaleString()):"-KES ".concat(Math.abs(n).toLocaleString());return"• ".concat(e.product.name," (").concat(e.product.thickness,")\n  Original Price: KES ").concat(e.originalPrice.toLocaleString(),"\n  Bargain Price: KES ").concat(e.bargainPrice.toLocaleString(),"\n  Difference: ").concat(t)}).join("\n\n"),c=a-r,d=c>0?"+KES ".concat(c.toLocaleString()):"-KES ".concat(Math.abs(c).toLocaleString());return"*BROKER PRICE INQUIRY - Eastleigh Turf Grass*\n\n*Broker Details:*\n• Name: ".concat(n,"\n• Email: ").concat(t,"\n\n*Price Inquiries:*\n").concat(o,"\n\n*Inquiry Summary:*\n• Total Original Value: KES ").concat(r.toLocaleString(),"\n• Total Bargain Value: KES ").concat(a.toLocaleString(),"\n• Total Difference: ").concat(d,"\n\n*Submitted:* ").concat((new Date).toLocaleString("en-KE"))}(e),t="254743375997",r=encodeURIComponent(n),a="https://wa.me/".concat(t,"?text=").concat(r);window.open(a,"_blank"),i=!0}i?(showToast("Inquiries submitted successfully! WhatsApp will open with your inquiry details.","success"),n=[],t=1,o(),window.BrokerDashboard&&window.BrokerDashboard.updateCartCount&&window.BrokerDashboard.updateCartCount()):showToast("Failed to send inquiries. Please try again.","error")}catch(e){console.error("Inquiry submission error:",e),showToast("An error occurred while submitting the inquiries.","error")}},getItemCount:function(){return n.length}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()})();
//# sourceMappingURL=inquiry.71288545.js.map
